# Quick Start

## Project Bootstrap

1. Create a new Flutter project inside your app's directory:

   ```bash
   ## All platforms
   flutter create widgetbook --empty

   ## Certain platforms
   flutter create widgetbook --empty --platforms=web,macos
   ```

1. To avoid naming conflict with the [Widgetbook pub package](https://pub.dev/packages/widgetbook), change the project `name` to `widgetbook_workspace` inside the `widgetbook/pubspec.yaml` file:

   ```diff
   - name: widgetbook
   + name: widgetbook_workspace
   ```

1. Add the following dependencies to your `widgetbook` project:

   ```
   flutter pub add widgetbook:{{ versions.widgetbook }} \
         dev:build_runner
   ```

1. Add your app as a path dependency to the `widgetbook/pubspec.yaml` file:

   ```yaml
   dependencies:
     your_app:
       path: ../
   ```

1. Create a `widgetbook/lib/widgetbook.config.dart` file:

   ```dart
   import 'package:flutter/material.dart';
   import 'package:widgetbook/widgetbook.dart';

   import 'components.book.dart'; // Will be generated later

   final config = Config(
     components: components,
     addons: [
       ViewportAddon([
         Viewports.none,
         IosViewports.iPhone13,
         const ViewportData.constrained(
           name: '800w',
           pixelRatio: 2,
           maxWidth: 800,
           platform: TargetPlatform.iOS,
         ),
       ]),
       MaterialThemeAddon({
         'Dark': ThemeData.dark(),
         'Light': ThemeData.light(),
       }),
     ],
   );
   ```

1. Replace `widgetbook/lib/main.dart` contents with:

   ```dart
   import 'package:widgetbook/widgetbook.dart';

   import 'widgetbook.config.dart';

   void main() => runWidgetbook(config);
   ```

1. Create `widgetbook/test/main_test.dart` file:

   ```dart
   import 'package:widgetbook_workspace/widgetbook.config.dart';
   import 'package:widgetbook_test/widgetbook_test.dart';

   Future<void> main() async {
     await testWidgetbook(config);
   }
   ```

## Create your first Component

A `Component` is a representation of a Widget you want to showcase in Widgetbook. Each `Component` can have multiple stories.
Let's start by cataloging a simple widget.

1. Create a new widget in your app, e.g. `lib/widgets/custom_button.dart`:

   ```dart
   import 'package:flutter/material.dart';

   class CustomButton extends StatelessWidget {
     final String label;
     final VoidCallback onPressed;

     const CustomButton({
       super.key,
       required this.label,
       required this.onPressed,
     });

     @override
     Widget build(BuildContext context) {
       return ElevatedButton(
          onPressed: onPressed,
          child: Text(label),
        );
      }
    }
   ```

1. Create a new file `widgetbook/lib/custom_button.stories.dart`:

   ```dart
   import 'package:widgetbook/widgetbook.dart';
   import 'package:your_app/widgets/custom_button.dart';

   part 'custom_button.stories.book.dart';

   const meta = Meta<CustomButton>();
   ```

1. Run `dart run build_runner build` to generate the boilerplate code.

## Create your first Story

A story is a variant of a `Component`. For example, if the component is a button, its stories can be "primary button", "secondary button", "disabled button", etc.
Now you can start writing stories for the `CustomButton` component. A story must start with `$`.

```dart
import 'package:widgetbook/widgetbook.dart';
import 'package:your_app/widgets/custom_button.dart';

part 'custom_button.stories.book.dart';

const meta = Meta<CustomButton>();

final $Default = _Story();  // [!code highlight]
```

## Create your first Scenario

A `Scenario` is like a golden test of your story with certain `args` and `mode`.

```dart
import 'package:widgetbook/widgetbook.dart';
import 'package:your_app/widgets/custom_button.dart';

part 'custom_button.stories.book.dart';

const meta = Meta<CustomButton>();

final $Default = _Story(
  scenarios: [
    _Scenario(
      name: 'Long Label',
      modes: [MaterialThemeMode('Light', ThemeData.light())],
      args: _Args.fixed(
        label: 'This is a very long label',
        onPressed: () {},
      ),
      run: (tester, args) async {
        // You can simulate interactions here
        // For example, tap the button
        // await tester.tap(find.text(args.label.value));

        // Or you can also expect certain behaviors
        // expect(...);
      },
    ),
  ],
);
```

To run these scenarios, you need to run `flutter test` then check your `widgetbook/build/.widgetbook` folder for the generated screenshots.

If you want to define global scenarios for all stories in you widgetbook, you can define them in your `widgetbook.config.dart` file:

```dart
final config = Config(
  // ...
  scenarios: [
    ScenarioDefinition(
      name: 'Dark',
      modes: [MaterialThemeMode('Dark', ThemeData.dark())],
    ),
    ScenarioDefinition(
      name: 'Light',
      modes: [MaterialThemeMode('Light', ThemeData.light())],
    ),
  ],
);
```

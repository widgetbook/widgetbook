# Setup with Demo Project

This guide will walk you through setting up a demo project to test Widgetbook Cloud. 
We'll use the [groceries-demo](https://github.com/widgetbook/groceries-demo) repository as our example project.

## Prerequisites

Before starting this guide, make sure you have:

- An account for GitHub, GitLab, Azure DevOps, or Bitbucket
- Access to Widgetbook Cloud
- Basic knowledge of Git and your chosen Git provider

<Steps>
  <Step title="Clone the Demo Repository">
    <Tabs
      values={[
        { label: "GitHub", value: "github" },
        { label: "GitLab", value: "gitlab" },
        { label: "Azure DevOps", value: "azure" },
        { label: "Bitbucket", value: "bitbucket" },
      ]}
    >
      <TabItem value="github">
        <p>Since you're using GitHub, you can fork the repository directly:</p>
        
        <ol>
          <li>Navigate to <a href="https://github.com/widgetbook/groceries-demo" target="_blank" rel="noopener">https://github.com/widgetbook/groceries-demo</a></li>
          <li>Click the <strong>Fork</strong> button in the top-right corner</li>
          <li>Select your personal account as the destination</li>
          <li>Wait for the forking process to complete</li>
          <li>Clone your forked repository:</li>
        </ol>
        
        ```bash
        git clone https://github.com/YOUR_USERNAME/groceries-demo.git
        cd groceries-demo
        ```
        
        <Info>
          Use your personal GitHub account for forking, as business accounts might lack permission to connect repositories to Widgetbook Cloud.
        </Info>
      </TabItem>
      
      <TabItem value="gitlab">
        <p>Since you're using GitLab, you'll need to import the repository:</p>
        
        <ol>
          <li>Create a new empty repository in GitLab</li>
          <li>Clone the original repository:</li>
        </ol>
        
        ```bash
        git clone https://github.com/widgetbook/groceries-demo.git
        cd groceries-demo
        ```
        
        <ol start="3">
          <li>Change the remote origin to your GitLab repository:</li>
        </ol>
        
        
        ```bash
        git remote remove origin
        git remote add origin https://gitlab.com/YOUR_USERNAME/groceries-demo.git
        git push -u origin main
        ```
      </TabItem>
      
      <TabItem value="azure">
        <p>Since you're using Azure DevOps, you'll need to import the repository:</p>
        
        <ol>
          <li>Create a new empty repository in Azure DevOps</li>
          <li>Clone the original repository:</li>
        </ol>
        
        ```bash
        git clone https://github.com/widgetbook/groceries-demo.git
        cd groceries-demo
        ```
        
        <ol start="3">
          <li>Change the remote origin to your Azure DevOps repository:</li>
        </ol>
        
        ```bash
        git remote remove origin
        git remote add origin https://dev.azure.com/YOUR_ORGANIZATION/YOUR_PROJECT/_git/groceries-demo
        git push -u origin main
        ```
      </TabItem>
      
      <TabItem value="bitbucket">
        <p>Since you're using Bitbucket, you'll need to import the repository:</p>
        
        <ol>
          <li>Create a new empty repository in Bitbucket</li>
          <li>Clone the original repository:</li>
        </ol>
        
        ```bash
        git clone https://github.com/widgetbook/groceries-demo.git
        cd groceries-demo
        ```
        
        <ol start="3">
          <li>Change the remote origin to your Bitbucket repository:</li>
        </ol>
        
        ```bash
        git remote remove origin
        git remote add origin https://bitbucket.org/YOUR_USERNAME/groceries-demo.git
        git push -u origin main
        ```
      </TabItem>
    </Tabs>
  </Step>

  <Step title="Create a Widgetbook Cloud Workspace">
    <ol>
      <li>Navigate to <a href="https://app.widgetbook.io/" target="_blank" rel="noopener">Widgetbook Cloud</a></li>
      <li>Sign in with your account</li>
      <li>Click <strong>Create Workspace</strong> or navigate to the workspaces section</li>
      <li>Enter a name for your workspace (e.g., "Demo Workspace")</li>
      <li>Click <strong>Create</strong> to finalize the workspace creation</li>
    </ol>
    
    <Info>
      Workspaces help you organize your projects. You can create multiple workspaces for different teams or purposes.
    </Info>
  </Step>

  <Step title="Create a Widgetbook Cloud Project">
    <Tabs
      values={[
        { label: "GitHub", value: "github" },
        { label: "GitLab", value: "gitlab" },
        { label: "Azure DevOps", value: "azure" },
        { label: "Bitbucket", value: "bitbucket" },
      ]}
    >
      <TabItem value="github">
        <ol>
          <li>In your Widgetbook Cloud workspace, click <strong>Create Project</strong></li>
          <li>Select <strong>GitHub</strong> as your Git provider</li>
          <li>If you haven't connected your GitHub account yet, click <strong>Connect GitHub</strong> and follow the authorization process</li>
          <li>Search for your forked repository: <code>groceries-demo</code></li>
          <li>Select the repository and click <strong>Create Project</strong></li>
          <li>Wait for the project to be created and initialized</li>
        </ol>
      </TabItem>
      
      <TabItem value="gitlab">
        <ol>
          <li>In your Widgetbook Cloud workspace, click <strong>Create Project</strong></li>
          <li>Select <strong>GitLab</strong> as your Git provider</li>
          <li>If you haven't connected your GitLab account yet, click <strong>Connect GitLab</strong> and follow the authorization process</li>
          <li>Search for your repository: <code>groceries-demo</code></li>
          <li>Select the repository and click <strong>Create Project</strong></li>
          <li>Wait for the project to be created and initialized</li>
        </ol>
      </TabItem>
      
      <TabItem value="azure">
        <ol>
          <li>In your Widgetbook Cloud workspace, click <strong>Create Project</strong></li>
          <li>Select <strong>Azure DevOps</strong> as your Git provider</li>
          <li>If you haven't connected your Azure DevOps account yet, click <strong>Connect Azure DevOps</strong> and follow the authorization process</li>
          <li>Search for your repository: <code>groceries-demo</code></li>
          <li>Select the repository and click <strong>Create Project</strong></li>
          <li>Wait for the project to be created and initialized</li>
        </ol>
      </TabItem>
      
      <TabItem value="bitbucket">
        <ol>
          <li>In your Widgetbook Cloud workspace, click <strong>Create Project</strong></li>
          <li>Select <strong>Bitbucket</strong> as your Git provider</li>
          <li>If you haven't connected your Bitbucket account yet, click <strong>Connect Bitbucket</strong> and follow the authorization process</li>
          <li>Search for your repository: <code>groceries-demo</code></li>
          <li>Select the repository and click <strong>Create Project</strong></li>
          <li>Wait for the project to be created and initialized</li>
        </ol>
      </TabItem>
    </Tabs>
  </Step>

  <Step title="Get the API Key">
    <ol>
      <li>In your newly created Widgetbook Cloud project, navigate to <strong>Settings</strong></li>
      <li>Find the <strong>API Key</strong> section</li>
      <li>Copy the API key (it will look something like <code>wb_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</code>)</li>
    </ol>
    
    <Info>
      Keep this API key secure. You'll need it to configure your CI/CD pipeline to upload builds to Widgetbook Cloud.
    </Info>
  </Step>

  <Step title="Add the API Key to Your Git Provider">
    <Tabs
      values={[
        { label: "GitHub", value: "github" },
        { label: "GitLab", value: "gitlab" },
        { label: "Azure DevOps", value: "azure" },
        { label: "Bitbucket", value: "bitbucket" },
      ]}
    >
      <TabItem value="github">
        <ol>
          <li>Go to your GitHub repository</li>
          <li>Navigate to <strong>Settings</strong> → <strong>Secrets and variables</strong> → <strong>Actions</strong></li>
          <li>Click <strong>New repository secret</strong></li>
          <li>Set the name to <code>WIDGETBOOK_API_KEY</code></li>
          <li>Set the value to your API key from Widgetbook Cloud</li>
          <li>Click <strong>Add secret</strong></li>
        </ol>
      </TabItem>
      
      <TabItem value="gitlab">
        <ol>
          <li>Go to your GitLab repository</li>
          <li>Navigate to <strong>Settings</strong> → <strong>CI/CD</strong></li>
          <li>Expand the <strong>Variables</strong> section</li>
          <li>Click <strong>Add variable</strong></li>
          <li>Set the key to <code>WIDGETBOOK_API_KEY</code></li>
          <li>Set the value to your API key from Widgetbook Cloud</li>
          <li>Make sure <strong>Protect variable</strong> is checked if you want to restrict it to protected branches</li>
          <li>Click <strong>Add variable</strong></li>
        </ol>
      </TabItem>
      
      <TabItem value="azure">
        <ol>
          <li>Go to your Azure DevOps project</li>
          <li>Navigate to <strong>Pipelines</strong> → <strong>Library</strong></li>
          <li>Click <strong>+ Variable group</strong></li>
          <li>Give your variable group a name (e.g., "Widgetbook Variables")</li>
          <li>Add a variable with name <code>WIDGETBOOK_API_KEY</code> and your API key as the value</li>
          <li>Click <strong>Save</strong></li>
        </ol>
      </TabItem>
      
      <TabItem value="bitbucket">
        <ol>
          <li>Go to your Bitbucket repository</li>
          <li>Navigate to <strong>Repository settings</strong> → <strong>Pipelines</strong> → <strong>Repository variables</strong></li>
          <li>Click <strong>Add</strong></li>
          <li>Set the name to <code>WIDGETBOOK_API_KEY</code></li>
          <li>Set the value to your API key from Widgetbook Cloud</li>
          <li>Make sure <strong>Secured</strong> is checked</li>
          <li>Click <strong>Add</strong></li>
        </ol>
      </TabItem>
    </Tabs>
  </Step>

  <Step title="Re-run the CI/CD Pipeline">
    <Tabs
      values={[
        { label: "GitHub", value: "github" },
        { label: "GitLab", value: "gitlab" },
        { label: "Azure DevOps", value: "azure" },
        { label: "Bitbucket", value: "bitbucket" },
      ]}
    >
      <TabItem value="github">
        <ol>
          <li>Go to your GitHub repository</li>
          <li>Navigate to <strong>Actions</strong> tab</li>
          <li>Find the most recent workflow run</li>
          <li>Click the <strong>Re-run jobs</strong> button (three dots menu)</li>
          <li>Select <strong>Re-run all jobs</strong></li>
          <li>Wait for the workflow to complete</li>
        </ol>
      </TabItem>
      
      <TabItem value="gitlab">
        <ol>
          <li>Go to your GitLab repository</li>
          <li>Navigate to <strong>CI/CD</strong> → <strong>Pipelines</strong></li>
          <li>Find the most recent pipeline</li>
          <li>Click the <strong>Retry</strong> button (circular arrow icon)</li>
          <li>Wait for the pipeline to complete</li>
        </ol>
      </TabItem>
      
      <TabItem value="azure">
        <ol>
          <li>Go to your Azure DevOps project</li>
          <li>Navigate to <strong>Pipelines</strong></li>
          <li>Find the most recent pipeline run</li>
          <li>Click the <strong>Run pipeline</strong> button</li>
          <li>Select the branch and click <strong>Run</strong></li>
          <li>Wait for the pipeline to complete</li>
        </ol>
      </TabItem>
      
      <TabItem value="bitbucket">
        <ol>
          <li>Go to your Bitbucket repository</li>
          <li>Navigate to <strong>Pipelines</strong></li>
          <li>Find the most recent pipeline</li>
          <li>Click the <strong>Rerun</strong> button</li>
          <li>Wait for the pipeline to complete</li>
        </ol>
      </TabItem>
    </Tabs>
    
    <Info>
      After the pipeline completes successfully, you should see a new build appear in your Widgetbook Cloud project's builds section.
    </Info>
  </Step>

  <Step title="Create a Component Change and Pull Request">
    <ol>
      <li>Create a new branch for your changes:</li>
    </ol>
    
    ```bash
    git checkout -b feature/update-button-color
    ```
    
    <ol start="2">
      <li>Make a small change to a component. For example, open <code>lib/widgets/button.dart</code> and change the button color:</li>
    </ol>
    
    ```dart
    // Change from
    color: Colors.blue,
    
    // To
    color: Colors.green,
    ```
    
    <ol start="3">
      <li>Commit and push your changes:</li>
    </ol>
    
    ```bash
    git add .
    git commit -m "Update button color to green"
    git push origin feature/update-button-color
    ```
    
    <ol start="4">
      <li>Create a pull request (or merge request in GitLab):</li>
    </ol>
    
    <Tabs
      values={[
        { label: "GitHub", value: "github" },
        { label: "GitLab", value: "gitlab" },
        { label: "Azure DevOps", value: "azure" },
        { label: "Bitbucket", value: "bitbucket" },
      ]}
    >
      <TabItem value="github">
        <ol>
          <li>Go to your GitHub repository</li>
          <li>You should see a prompt to create a pull request for your recently pushed branch</li>
          <li>Click <strong>Compare & pull request</strong></li>
          <li>Add a title and description for your PR</li>
          <li>Click <strong>Create pull request</strong></li>
        </ol>
      </TabItem>
      
      <TabItem value="gitlab">
        <ol>
          <li>Go to your GitLab repository</li>
          <li>You should see a prompt to create a merge request for your recently pushed branch</li>
          <li>Click <strong>Create merge request</strong></li>
          <li>Add a title and description for your MR</li>
          <li>Click <strong>Create merge request</strong></li>
        </ol>
      </TabItem>
      
      <TabItem value="azure">
        <ol>
          <li>Go to your Azure DevOps project</li>
          <li>Navigate to <strong>Repos</strong> → <strong>Pull requests</strong></li>
          <li>Click <strong>New pull request</strong></li>
          <li>Select your feature branch as the source and main as the target</li>
          <li>Add a title and description</li>
          <li>Click <strong>Create</strong></li>
        </ol>
      </TabItem>
      
      <TabItem value="bitbucket">
        <ol>
          <li>Go to your Bitbucket repository</li>
          <li>Navigate to <strong>Pull requests</strong></li>
          <li>Click <strong>Create pull request</strong></li>
          <li>Select your feature branch as the source and main as the target</li>
          <li>Add a title and description</li>
          <li>Click <strong>Create</strong></li>
        </ol>
      </TabItem>
    </Tabs>
  </Step>

  <Step title="Check the Pull Request in Widgetbook Cloud">
    <ol>
      <li>Wait for the CI/CD pipeline to complete for your feature branch</li>
      <li>Go to your Widgetbook Cloud project</li>
      <li>Navigate to the <strong>Reviews</strong> section</li>
      <li>You should see a new review for your pull request</li>
      <li>Click on the review to see the visual differences between the base and feature branches</li>
      <li>Review the changes and approve or request changes as needed</li>
    </ol>
    
    <Info>
      The review will show you exactly what changed visually between your feature branch and the main branch, making it easy to spot UI regressions or unintended changes.
    </Info>
  </Step>
</Steps>

## What's Next?

Congratulations! You've successfully set up a demo project with Widgetbook Cloud. Here are some next steps you can explore:

<CardGroup>
  <Card title="Learn about Reviews" icon="code-compare" href="/cloud/reviews">
    Discover how to use Widgetbook Cloud reviews to catch UI regressions before they reach production.
  </Card>
  
  <Card title="Explore Builds" icon="hammer" href="/cloud/builds/overview">
    Learn more about how Widgetbook Cloud builds work and how to access them.
  </Card>
  
  <Card title="Setup Your Own Project" icon="rocket" href="/cloud/projects/create">
    Apply what you've learned to set up Widgetbook Cloud with your own Flutter project.
  </Card>
</CardGroup>

## Troubleshooting

If you encounter any issues during setup:

1. **Repository not showing up**: Make sure you're using a personal account and have the necessary permissions
2. **API key not working**: Double-check that the API key is correctly added as a secret/variable in your Git provider
3. **Builds not appearing**: Verify that your CI/CD pipeline is configured correctly and the Widgetbook CLI is being used
4. **Reviews not generating**: Ensure that both the base and feature branches have successful builds

For more detailed troubleshooting, check out our [Cloud documentation](/cloud) or reach out to our support team.

# Setup with Demo Project

This guide will walk you through setting up a demo project to test Widgetbook Cloud. 
We'll use the [groceries-demo](https://github.com/widgetbook/groceries-demo) repository as our example project.

## Prerequisites

Before starting this guide, make sure you have:

- An account for GitHub, GitLab, Azure DevOps, or Bitbucket
- Access to Widgetbook Cloud
- Basic knowledge of Git and your chosen Git provider

## Steps

<Steps>
  <Step title="Clone the Demo Repository">
    <Tabs
      values={[
        { label: "GitHub", value: "github" },
        { label: "GitLab", value: "gitlab" },
        { label: "Azure DevOps", value: "azure" },
        { label: "Bitbucket", value: "bitbucket" },
      ]}
    >
      <TabItem value="github">
        Since you're using GitHub, you can fork the repository directly:
        
        1. Navigate to the [groceries-demo repository](https://github.com/widgetbook/groceries-demo)
        1. Click the **Fork** button in the top-right corner
        1. Select your personal account as the destination
        1. Wait for the forking process to complete
        1. Clone your forked repository:
        
        ```bash
        git clone https://github.com/YOUR_USERNAME/groceries-demo.git
        cd groceries-demo
        ```
        
        <Info>
          Use your personal GitHub account for forking, as business accounts might lack permission to connect repositories to Widgetbook Cloud.
        </Info>
      </TabItem>
      
      <TabItem value="gitlab">
        Since you're using GitLab, you'll need to import the repository:

        1. Create a new empty repository in GitLab
        2. Clone the original repository:

        ```bash
        git clone https://github.com/widgetbook/groceries-demo.git
        cd groceries-demo
        ```

        3. Change the remote origin to your GitLab repository:

        ```bash
        git remote remove origin
        git remote add origin https://gitlab.com/YOUR_USERNAME/groceries-demo.git
        git push -u origin main
        ```
      </TabItem>
      
      <TabItem value="azure">
        Since you're using Azure DevOps, you'll need to import the repository:

        1. Create a new empty repository in Azure DevOps
        2. Clone the original repository:

        ```bash
        git clone https://github.com/widgetbook/groceries-demo.git
        cd groceries-demo
        ```

        3. Change the remote origin to your Azure DevOps repository:

        ```bash
        git remote remove origin
        git remote add origin https://dev.azure.com/YOUR_ORGANIZATION/YOUR_PROJECT/_git/groceries-demo
        git push -u origin main
        ```
      </TabItem>
      
      <TabItem value="bitbucket">
        Since you're using Bitbucket, you'll need to import the repository:

        1. Create a new empty repository in Bitbucket
        2. Clone the original repository:

        ```bash
        git clone https://github.com/widgetbook/groceries-demo.git
        cd groceries-demo
        ```

        3. Change the remote origin to your Bitbucket repository:

        ```bash
        git remote remove origin
        git remote add origin https://bitbucket.org/YOUR_USERNAME/groceries-demo.git
        git push -u origin main
        ```
      </TabItem>
    </Tabs>
  </Step>

  <Step title="Create a Widgetbook Cloud Workspace">
    1. Navigate to [Widgetbook Cloud](https://app.widgetbook.io/)
    2. Sign in with your account
    3. Click **Create Workspace** or navigate to the workspaces section
    4. Enter a name for your workspace (e.g., "Demo Workspace")
    5. Click **Create** to finalize the workspace creation
    
    <Info>
      Workspaces help you organize your projects. You can create multiple workspaces for different teams or purposes.
    </Info>
  </Step>

  <Step title="Create a Widgetbook Cloud Project">
    <Tabs
      values={[
        { label: "GitHub", value: "github" },
        { label: "GitLab", value: "gitlab" },
        { label: "Azure DevOps", value: "azure" },
        { label: "Bitbucket", value: "bitbucket" },
      ]}
    >
      <TabItem value="github">
        1. In your Widgetbook Cloud workspace, click **Create Project**
        2. Select **GitHub** as your Git provider
        3. If you haven't connected your GitHub account yet, click **Connect GitHub** and follow the authorization process
        4. Search for your forked repository: `groceries-demo`
        5. Select the repository and click **Create Project**
        6. Wait for the project to be created and initialized
      </TabItem>
      
      <TabItem value="gitlab">
        1. In your Widgetbook Cloud workspace, click **Create Project**
        2. Select **GitLab** as your Git provider
        3. If you haven't connected your GitLab account yet, click **Connect GitLab** and follow the authorization process
        4. Search for your repository: `groceries-demo`
        5. Select the repository and click **Create Project**
        6. Wait for the project to be created and initialized
      </TabItem>
      
      <TabItem value="azure">
        1. In your Widgetbook Cloud workspace, click **Create Project**
        2. Select **Azure DevOps** as your Git provider
        3. If you haven't connected your Azure DevOps account yet, click **Connect Azure DevOps** and follow the authorization process
        4. Search for your repository: `groceries-demo`
        5. Select the repository and click **Create Project**
        6. Wait for the project to be created and initialized
      </TabItem>
      
      <TabItem value="bitbucket">
        1. In your Widgetbook Cloud workspace, click **Create Project**
        2. Select **Bitbucket** as your Git provider
        3. If you haven't connected your Bitbucket account yet, click **Connect Bitbucket** and follow the authorization process
        4. Search for your repository: `groceries-demo`
        5. Select the repository and click **Create Project**
        6. Wait for the project to be created and initialized
      </TabItem>
    </Tabs>
  </Step>

  <Step title="Get the API Key">
    1. In your newly created Widgetbook Cloud project, navigate to **Settings**
    2. Find the **API Key** section
    3. Copy the API key (it will look something like `wb_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx`)
    
    <Info>
      Keep this API key secure. You'll need it to configure your CI/CD pipeline to upload builds to Widgetbook Cloud.
    </Info>
  </Step>

  <Step title="Add the API Key to Your Git Provider">
    <Tabs
      values={[
        { label: "GitHub", value: "github" },
        { label: "GitLab", value: "gitlab" },
        { label: "Azure DevOps", value: "azure" },
        { label: "Bitbucket", value: "bitbucket" },
      ]}
    >
      <TabItem value="github">
        1. Go to your GitHub repository
        2. Navigate to **Settings** → **Secrets and variables** → **Actions**
        3. Click **New repository secret**
        4. Set the name to `WIDGETBOOK_API_KEY`
        5. Set the value to your API key from Widgetbook Cloud
        6. Click **Add secret**
      </TabItem>
      
      <TabItem value="gitlab">
        1. Go to your GitLab repository
        2. Navigate to **Settings** → **CI/CD**
        3. Expand the **Variables** section
        4. Click **Add variable**
        5. Set the key to `WIDGETBOOK_API_KEY`
        6. Set the value to your API key from Widgetbook Cloud
        7. Make sure **Protect variable** is checked if you want to restrict it to protected branches
        8. Click **Add variable**
      </TabItem>
      
      <TabItem value="azure">
        1. Go to your Azure DevOps project
        2. Navigate to **Pipelines** → **Library**
        3. Click **+ Variable group**
        4. Give your variable group a name (e.g., "Widgetbook Variables")
        5. Add a variable with name `WIDGETBOOK_API_KEY` and your API key as the value
        6. Click **Save**
      </TabItem>
      
      <TabItem value="bitbucket">
        1. Go to your Bitbucket repository
        2. Navigate to **Repository settings** → **Pipelines** → **Repository variables**
        3. Click **Add**
        4. Set the name to `WIDGETBOOK_API_KEY`
        5. Set the value to your API key from Widgetbook Cloud
        6. Make sure **Secured** is checked
        7. Click **Add**
      </TabItem>
    </Tabs>
  </Step>

  <Step title="Re-run the CI/CD Pipeline">
    <Tabs
      values={[
        { label: "GitHub", value: "github" },
        { label: "GitLab", value: "gitlab" },
        { label: "Azure DevOps", value: "azure" },
        { label: "Bitbucket", value: "bitbucket" },
      ]}
    >
      <TabItem value="github">
        1. Go to your GitHub repository
        2. Navigate to **Actions** tab
        3. Find the most recent workflow run
        4. Click the **Re-run jobs** button (three dots menu)
        5. Select **Re-run all jobs**
        6. Wait for the workflow to complete
      </TabItem>
      
      <TabItem value="gitlab">
        1. Go to your GitLab repository
        2. Navigate to **CI/CD** → **Pipelines**
        3. Find the most recent pipeline
        4. Click the **Retry** button (circular arrow icon)
        5. Wait for the pipeline to complete
      </TabItem>
      
      <TabItem value="azure">
        1. Go to your Azure DevOps project
        2. Navigate to **Pipelines**
        3. Find the most recent pipeline run
        4. Click the **Run pipeline** button
        5. Select the branch and click **Run**
        6. Wait for the pipeline to complete
      </TabItem>
      
      <TabItem value="bitbucket">
        1. Go to your Bitbucket repository
        2. Navigate to **Pipelines**
        3. Find the most recent pipeline
        4. Click the **Rerun** button
        5. Wait for the pipeline to complete
      </TabItem>
    </Tabs>
    
    <Info>
      After the pipeline completes successfully, you should see a new build appear in your Widgetbook Cloud project's builds section.
    </Info>
  </Step>

  <Step title="Create a Component Change and Pull Request">
    1. Create a new branch for your changes:

    ```bash
    git checkout -b feature/update-button-color
    ```

    2. Make a small change to a component. For example, open `lib/widgets/button.dart` and change the button color:

    ```dart
    // Change from
    color: Colors.blue,
    
    // To
    color: Colors.green,
    ```

    3. Commit and push your changes:

    ```bash
    git add .
    git commit -m "Update button color to green"
    git push origin feature/update-button-color
    ```

    4. Create a pull request (or merge request in GitLab):
    
    <Tabs
      values={[
        { label: "GitHub", value: "github" },
        { label: "GitLab", value: "gitlab" },
        { label: "Azure DevOps", value: "azure" },
        { label: "Bitbucket", value: "bitbucket" },
      ]}
    >
      <TabItem value="github">
        1. Go to your GitHub repository
        2. You should see a prompt to create a pull request for your recently pushed branch
        3. Click **Compare & pull request**
        4. Add a title and description for your PR
        5. Click **Create pull request**
      </TabItem>
      
      <TabItem value="gitlab">
        1. Go to your GitLab repository
        2. You should see a prompt to create a merge request for your recently pushed branch
        3. Click **Create merge request**
        4. Add a title and description for your MR
        5. Click **Create merge request**
      </TabItem>
      
      <TabItem value="azure">
        1. Go to your Azure DevOps project
        2. Navigate to **Repos** → **Pull requests**
        3. Click **New pull request**
        4. Select your feature branch as the source and main as the target
        5. Add a title and description
        6. Click **Create**
      </TabItem>
      
      <TabItem value="bitbucket">
        1. Go to your Bitbucket repository
        2. Navigate to **Pull requests**
        3. Click **Create pull request**
        4. Select your feature branch as the source and main as the target
        5. Add a title and description
        6. Click **Create**
      </TabItem>
    </Tabs>
  </Step>

  <Step title="Check the Pull Request in Widgetbook Cloud">
    1. Wait for the CI/CD pipeline to complete for your feature branch
    2. Go to your Widgetbook Cloud project
    3. Navigate to the **Reviews** section
    4. You should see a new review for your pull request
    5. Click on the review to see the visual differences between the base and feature branches
    6. Review the changes and approve or request changes as needed
    
    <Info>
      The review will show you exactly what changed visually between your feature branch and the main branch, making it easy to spot UI regressions or unintended changes.
    </Info>
  </Step>
</Steps>

## What's Next?

Congratulations! You've successfully set up a demo project with Widgetbook Cloud. Here are some next steps you can explore:

<CardGroup>
  <Card title="Learn about Reviews" icon="code-compare" href="/cloud/reviews">
    Discover how to use Widgetbook Cloud reviews to catch UI regressions before they reach production.
  </Card>
  
  <Card title="Explore Builds" icon="hammer" href="/cloud/builds/overview">
    Learn more about how Widgetbook Cloud builds work and how to access them.
  </Card>
  
  <Card title="Setup Your Own Project" icon="rocket" href="/cloud/projects/create">
    Apply what you've learned to set up Widgetbook Cloud with your own Flutter project.
  </Card>
</CardGroup>

## Troubleshooting

If you encounter any issues during setup:

1. **Repository not showing up**: Make sure you're using a personal account and have the necessary permissions
2. **API key not working**: Double-check that the API key is correctly added as a secret/variable in your Git provider
3. **Builds not appearing**: Verify that your CI/CD pipeline is configured correctly and the Widgetbook CLI is being used
4. **Reviews not generating**: Ensure that both the base and feature branches have successful builds

For more detailed troubleshooting, check out our [Cloud documentation](/cloud) or reach out to our support team.
